==================================
gsalib: Utility Functions For GATK
==================================

gsalib
======
Python/pandas package of utility functions for GATK

A GATKReport is simply a text document that contains well-formatted, easy to read representation of some tabular data.
Many GATK tools output their results as GATKReports. A report contains one or more individual GATK report tables.
Every table begins with a header for its metadata and then a header for its name and description.
The next row contains the column names followed by the data.

The Broad provides an R library called gsalib that allows you to load GATKReport files into R for further analysis.

https://gatkforums.broadinstitute.org/gatk/discussion/1244/what-is-the-gatkreport-file-format

This package allows you to load GATKReport files into Python/pandas for further analysis.

----

This is the README file for the project, based on the documentation of the original R gsalib package.

gsalib package Utility functions for GATK
=========================================

**Description**
Utility functions for analysis of genome sequence data with the GATK

The R package is primarily meant to be used programmatically by GATK tools. However the GatkReport class
can be used to easily read in data from a GATKReport for analysis with pandas. A GATKReport is a multi-table
document generated by GATK tools

**Author(s)**
R version: Kiran Garimella
R version Maintainer: Geraldine Van der Auwera <vdauwera@broadinstitute.org>
Python version: Michael Yourshaw <myourshaw@gmail.com>

**References**
http://www.broadinstitute.org/gatk/guide/article?id=1244

**Examples**

::
    from gsalib import GatkReport
    import pandas as pd

    report = GatkReport('test_v1.0.gatkreport.table')
    table = report.tables['GenotypeConcordance_Summary']


test_v1.0.gatkreport.table
------------------------

**Description**
This is a new-style GATKReport

**Format**
Text document containing multiple tables

**Source**
GSA test data, Broad Institute

**References**
http://www.broadinstitute.org/gatk/guide/article?id=1244

GatkReport._init__(self, filename, *args, **kwargs) Method to read in a GATKReport
----------------------------------------------

**Description**
This method reads in data from a GATKReport. A GATKReport is a document containing multiple
tables produced by the GATK.
Each table is loaded as a separate pandas DataFrame object in a dict-like GatkReport
object with the report name as a key.

**Usage**

::
report  = GatkReport(filename)

**Arguments**
filename The path to the GATKReport file.

**Details**
The GATKReport format replaces the multi-file output format used by many GATK tools and provides
a single, consolidated file format. This format accommodates multiple tables and is still
pandas-loadable through this function.

**Value**
Populates a GatkReport object, where each key is the TableName and the value is the DataFrame object with
the contents of the table. If multiple tables with the same name exist, each one after the first will be
given names of TableName.1, TableName.2, ..., TableName.N.

**Note**
This method accepts different versions of the GATKReport format by making internal calls to
_read_gatkreportv0() or _read_gatkreportv1() as appropriate.

**Author(s)**
R version: Kiran Garimella
Python version: Michael Yourshaw

**References**
http://www.broadinstitute.org/gatk/guide/article?id=1244

**Examples**

::
    from gsalib import GatkReport
    import pandas as pd

    report = GatkReport('test_v1.0.gatkreport.table')
    table = report.tables['GenotypeConcordance_Summary']

_read_gatkreportv0 Method to read in an old-style GATKReport
------------------------------------------------------------

**Description**
This method reads in data from a version 0.x GATKReport. It should not be called directly; instead,
gsa.read_gatkreport()

**Usage**

::
    _read_gatkreportv0(self, lines)

**Arguments**
lines The lines read in from the input file.

**Value**
Populates the data of a GatkReport object, where each key is the TableName and the value is the DataFrame object with
the contents of the table. If multiple tables with the same name exist, each one after the first will be
given names of TableName.1, TableName.2, ..., TableName.N.

**Author(s)**
R version: Kiran Garimella
Python version: Michael Yourshaw

**References**
http://www.broadinstitute.org/gatk/guide/article?id=1244

_read_gatkreportv1 Method to read in a new-style GATKReport
-----------------------------------------------------------

**Description**
This method reads in data from a version 1.x GATKReport. It should not be called directly; instead,
use read_gatkreport()

**Usage**

::
    _read_gatkreportv1(self, lines)

**Arguments**
lines The lines read in from the input file.

**Value**
Returns a LIST object, where each key is the TableName and the value is the data.frame object with
the contents of the table. If multiple tables with the same name exist, each one after the first will be
given names of TableName.v1, TableName.v2, ..., TableName.vN.

**Author(s)**
R version: Kiran Garimella
Python version: Michael Yourshaw

**References**
http://www.broadinstitute.org/gatk/guide/article?id=1244
